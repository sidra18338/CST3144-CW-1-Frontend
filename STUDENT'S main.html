<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lesson</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="lessons.js"></script>
</head>
<body>
  <div id="app">
    <!-- Header section with site name and checkout button -->
    <header>
      <h1 v-text="sitename"></h1>
      <button v-on:click="showCheckout">
        {{ cartItemCount }}
        <span class="fas fa-cart-plus"></span> Checkout
      </button>
    </header>

    <!-- Product listing section -->
    <div v-if="showProduct">
      <main class="lesson-container">
        <!-- Search bar for filtering lessons -->
        <div class="search-bar">
          <input 
            type="text" 
            v-model="searchQuery" 
            placeholder="Search lessons..." 
            @input="updateSearch"
          />
        </div>

        <!-- Sorting options section -->
        <div class="sorting-options">
          <p>Sort by:</p>
          <label>
            <input type="radio" v-model="sortBy" value="subject" /> Subject
          </label>
          <label>
            <input type="radio" v-model="sortBy" value="price" /> Price
          </label>
          <label>
            <input type="radio" v-model="sortBy" value="Location" /> Location
          </label>

          <p>Order:</p>
          <label>
            <input type="radio" v-model="sortOrder" value="asc" /> Ascending
          </label>
          <label>
            <input type="radio" v-model="sortOrder" value="desc" /> Descending
          </label>
        </div>

        <!-- Looping through filtered lessons and displaying each lesson -->
        <div v-for="lesson in filteredLessons" :key="lesson.id" class="lesson-info">
          <!-- Image section for each lesson -->
          <figure class="lesson-image">
            <img :src="lesson.image" :alt="lesson.subject + ' Lesson Image'" style="width: 150px; height: auto; object-fit: cover;" />
          </figure>
          <!-- Details section for each lesson -->
          <div class="lesson-details">
            <h2 v-text="lesson.subject"></h2>
            <p v-text="lesson.Location"></p>
            <p>Price: {{ lesson.price }}</p>
            <p>Available spaces: {{ lesson.availableInventory }}</p>
            
            <!-- Add to cart button, disabled if no inventory -->
            <button v-on:click="addToCart(lesson)" v-if="lesson.availableInventory > 0">Add to cart</button>
            <button disabled v-else>Add to cart</button>
          </div>
        </div>
      </main>
    </div>
    
    <!-- Checkout section -->
    <div v-else>
      <h2>Checkout</h2>
      <!-- Order form for user details -->
      <p><strong>First Name:</strong><input v-model="order.firstName"></p>
      <p><strong>Last Name:</strong><input v-model="order.lastName"></p>
      <p><strong>Address:</strong><input v-model="order.address"></p>
      <p><strong>City:</strong><input v-model="order.city"></p>
      <p><strong>State:</strong>
        <select v-model="order.state">
          <option disabled value="">State</option>
          <option>Dubai</option>
          <option>Sharjah</option>
          <option>Ajman</option>
          <option>Abu Dhabi</option>
        </select>
      </p>
    
      <p><strong>Zip/Postal:</strong><input v-model="order.zip"></p>
      <p><input type="checkbox" id="gift" value="true" v-model="order.gift">
        <label for="gift">Ship As Gift?</label></p>

      <!-- Displaying order information -->
      <h2>Order Information</h2>
      <p>First Name: {{order.firstName}}</p>
      <p>Last Name: {{order.lastName}}</p>
      <p>Address: {{order.address}}</p>
      <p>City: {{order.city}}</p>
      <p>Zip: {{order.zip}}</p>
      <p>State: {{order.state}}</p>
      <p>You have {{ cartItemCount }} items in your cart.</p>
      <button v-on:click="showCheckout">Go back to product</button>

      <!-- Displaying items in the cart -->
      <h3>My Cart</h3>
      <div v-for="cartitem in cart" class="myproduct">
        <p>{{lessons[cartitem-1].subject}}</p>
        <button v-on:click="removeFromCart(lessons[cartitem-1])">Delete</button>
      </div>
    </div>
  </div>
</body>
</html>
